/*******************************************************************************
 * AbyssalCraft
 * Copyright (c) 2012 - 2025 Shinoow.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the GNU Lesser Public License v3
 * which accompanies this distribution, and is available at
 * http://www.gnu.org/licenses/lgpl-3.0.txt
 *
 * Contributors:
 *     Shinoow -  implementation
 ******************************************************************************/
package com.shinoow.abyssalcraft.common.world.gen.layer;

import com.shinoow.abyssalcraft.api.biome.ACBiomes;

import net.minecraft.world.biome.Biome;
import net.minecraft.world.gen.layer.GenLayer;
import net.minecraft.world.gen.layer.IntCache;

public class GenLayerRiverDL extends GenLayer
{
	public GenLayerRiverDL(long p_i2128_1_, GenLayer p_i2128_3_)
	{
		super(p_i2128_1_);
		super.parent = p_i2128_3_;
	}

	/**
	 * Returns a list of integer values generated by this layer. These may be interpreted as temperatures, rainfall
	 * amounts, or Biome ID's based on the particular GenLayer subclass.
	 */
	@Override
	public int[] getInts(int areaX, int areaY, int areaWidth, int areaHeight)
	{
		int i = areaX - 1;
		int j = areaY - 1;
		int k = areaWidth + 2;
		int l = areaHeight + 2;
		int[] aint = parent.getInts(i, j, k, l);
		int[] aint1 = IntCache.getIntCache(areaWidth * areaHeight);

		for (int i1 = 0; i1 < areaHeight; ++i1)
			for (int j1 = 0; j1 < areaWidth; ++j1)
			{
				int k1 = riverFilter(aint[j1 + 0 + (i1 + 1) * k]);
				int l1 = riverFilter(aint[j1 + 2 + (i1 + 1) * k]);
				int i2 = riverFilter(aint[j1 + 1 + (i1 + 0) * k]);
				int j2 = riverFilter(aint[j1 + 1 + (i1 + 2) * k]);
				int k2 = riverFilter(aint[j1 + 1 + (i1 + 1) * k]);

				if (k2 == k1 && k2 == i2 && k2 == l1 && k2 == j2)
					aint1[j1 + i1 * areaWidth] = -1;
				else
					aint1[j1 + i1 * areaWidth] = Biome.getIdForBiome(ACBiomes.dreadlands_ocean);
			}

		return aint1;
	}

	private int riverFilter(int p_151630_1_)
	{
		return p_151630_1_ >= 2 ? 2 + (p_151630_1_ & 1) : p_151630_1_;
	}
}
